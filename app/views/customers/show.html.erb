<h1>Customer Details</h1>
<table>
  <tr><td>Name:</td><td><%= @customer.user.full_name %></td></tr>
  <tr><td>Email:</td><td><%= sanitize link_to(@customer.user.login, "mailto: " + @customer.user.login, :title => "click to create an email") %></td></tr>
  <tr><td>Postal address:</td><td><%= sanitize @customer.postal_address.gsub("\r","<br/>") %></td></tr>
  <tr><td>Contact phone number:</td><td><%= @customer.contact_phone_number %></td></tr>
</table><br/>
<% if @customer.shopping_carts.count > 0 %>
  <h2>Shopping Carts</h2>
  <table>
    <tr>
      <th style="width: 100px;">Required for</th>
      <th style="width:  70px;">Status</th>
      <th style="width:  70px;">PayPal</th>
      <th style="width: 130px;">Occasion</th>
      <th style="width: 350px;">Customer's description</th>
      <th style="width: 150px;">Name on cake</th>
    </tr>
    <% @customer.shopping_carts.order("created_at DESC").each do |cart| %>
      <tr>
        <td><%= cart.cake_required_at.strftime("%d-%b-%Y") %></td>
        <td><%= cart.shopping_cart_status.name %></td>
        <td><%= cart.pay_pal_status.name %></td>
        <td><%= cart.special_occasion %></td>
        <td><%= cart.general_description_from_customer %></td>
        <td><%= cart.name_to_appear_on_cake %></td>
        <td><%= link_to("view", shopping_cart_url(cart.id)) %></td>
      </tr>
    <% end %>
  </table><br/>
<% end %>
<%= link_to 'Back', currencies_path %> | <%= link_to 'Edit', edit_customer_path(@customer) %>